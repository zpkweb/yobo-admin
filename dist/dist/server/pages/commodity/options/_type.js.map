{"version":3,"file":"pages/commodity/options/_type.js","sources":["webpack:///./pages/commodity/options/_type.vue?c01b","webpack:///./pages/commodity/options/_type.vue","webpack:///./pages/commodity/options/_type.vue?dda4","webpack:///./pages/commodity/options/_type.vue?d3e6"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\"}},[_vm._l((_vm.form.optionsExamples),function(item,index){return _c('el-form-item',{key:index,attrs:{\"label\":(\"\" + (_vm.$t('content.create')) + (_vm.optionType[_vm.$route.params.type]) + (_vm.$t(\n      'content.example'\n    )))}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(item['zh-cn']),callback:function ($$v) {_vm.$set(item, 'zh-cn', $$v)},expression:\"item['zh-cn']\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(item['en-us']),callback:function ($$v) {_vm.$set(item, 'en-us', $$v)},expression:\"item['en-us']\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(item['ja-jp']),callback:function ($$v) {_vm.$set(item, 'ja-jp', $$v)},expression:\"item['ja-jp']\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(item['es-es']),callback:function ($$v) {_vm.$set(item, 'es-es', $$v)},expression:\"item['es-es']\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addOption}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('content.add'))+\"\\n        \")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2,\"offset\":2}},[_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('form')}}},[_vm._v(_vm._s(_vm.$t('content.clear')))])],1)],1)],1)}),_vm._v(\" \"),_vm._l((_vm.form.options),function(item,index){return _c('el-form-item',{key:index},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('el-form-item',{attrs:{\"prop\":'options.' + index + '.img'}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":((_vm.$config.origin) + \"/api/upload/images\"),\"data\":{ type: _vm.optionType[_vm.$route.params.type], index: index },\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload},model:{value:(item.img),callback:function ($$v) {_vm.$set(item, \"img\", $$v)},expression:\"item.img\"}},[(item.img)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":item.img}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"\\b艺术品\"+_vm._s(_vm.optionType[_vm.$route.params.type])+\"图片，请上传 210X185 比例的图片\")])])],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"prop\":'options.' + index + '.zh-cn',\"rules\":{\n            required: true,\n            message: (\"\" + (_vm.$t('lang.zh')) + (_vm.optionType[_vm.$route.params.type]) + (_vm.$t(\n              'form.noEmpty'\n            ))),\n            trigger: 'blur',\n          }}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('lang.zh') })},model:{value:(item['zh-cn']),callback:function ($$v) {_vm.$set(item, 'zh-cn', $$v)},expression:\"item['zh-cn']\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"prop\":'options.' + index + '.en-us',\"rules\":{\n            required: true,\n            message: (\"\" + (_vm.$t('lang.en')) + (_vm.optionType[_vm.$route.params.type]) + (_vm.$t(\n              'form.noEmpty'\n            ))),\n            trigger: 'blur',\n          }}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('lang.en') })},model:{value:(item['en-us']),callback:function ($$v) {_vm.$set(item, 'en-us', $$v)},expression:\"item['en-us']\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"prop\":'options.' + index + '.ja-jp',\"rules\":{\n            required: true,\n            message: (\"\" + (_vm.$t('lang.ja')) + (_vm.optionType[_vm.$route.params.type]) + (_vm.$t(\n              'form.noEmpty'\n            ))),\n            trigger: 'blur',\n          }}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('lang.ja') })},model:{value:(item['ja-jp']),callback:function ($$v) {_vm.$set(item, 'ja-jp', $$v)},expression:\"item['ja-jp']\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"prop\":'options.' + index + '.es-es',\"rules\":{\n            required: true,\n            message: (\"\" + (_vm.$t('lang.es')) + (_vm.optionType[_vm.$route.params.type]) + (_vm.$t(\n              'form.noEmpty'\n            ))),\n            trigger: 'blur',\n          }}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('lang.es') })},model:{value:(item['es-es']),callback:function ($$v) {_vm.$set(item, 'es-es', $$v)},expression:\"item['es-es']\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":5}},[(item.id)?_c('el-button',{on:{\"click\":function($event){$event.preventDefault();return _vm.updateOption(item, index)}}},[_vm._v(_vm._s(_vm.$t('content.update')))]):_c('el-button',{on:{\"click\":function($event){$event.preventDefault();return _vm.createOption(item, index)}}},[_vm._v(_vm._s(_vm.$t('content.create')))]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.onMock(item, index)}}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('content.fill'))+\"\\n        \")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){$event.preventDefault();return _vm.removeOption(item, index)}}},[_vm._v(_vm._s(_vm.$t('content.delete')))])],1)],1)],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Mock from 'mockjs'\nexport default {\n  name: 'CommodityOption',\n  watch: {\n    '$route.query': '$fetch',\n  },\n  data() {\n    return {\n      // lang: ['zh-cn', 'en-us', 'ja-jp', 'fr-fr'],\n      lang: ['zh-cn', 'en-us', 'ja-jp', 'es-es'],\n      optionType: {\n        category: this.$t('commodity.category'),\n        classification: this.$t('commodity.classification'),\n        material: this.$t('commodity.material'),\n        model: this.$t('commodity.model'),\n        place: this.$t('commodity.place'),\n        ruiwu: this.$t('commodity.ruiwu'),\n        shape: this.$t('commodity.shape'),\n        specification: this.$t('commodity.specification'),\n        style: this.$t('commodity.style'),\n        technique: this.$t('commodity.technique'),\n        theme: this.$t('commodity.theme'),\n        type: this.$t('commodity.type'),\n        use: this.$t('commodity.use'),\n      },\n      form: {\n        options: [\n          {\n            img: '',\n            'zh-cn': '',\n            'en-us': '',\n            'ja-jp': '',\n            // 'fr-fr': '',\n            'es-es': '',\n          },\n        ],\n        optionsExamples: [\n          {\n            img: '',\n            'zh-cn': '其他',\n            'en-us': 'other',\n            'ja-jp': 'その他',\n            // 'fr-fr': 'Autres',\n            'es-es': 'Español',\n          },\n        ],\n      },\n    }\n  },\n  async fetch() {\n    const options = await this.$axios.$get(\n      `/api/admin/commodity/retrieve/${this.$route.params.type}`\n    )\n    let retrieveData = [\n      {\n        img: '',\n        'zh-cn': '',\n        'en-us': '',\n        'ja-jp': '',\n        // 'fr-fr': '',\n        'es-es': '',\n      },\n    ]\n    if (options.data && options.data.length) {\n      retrieveData.unshift(...options.data)\n    }\n    this.form.options = retrieveData\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate(async (valid) => {\n        if (valid) {\n          // console.log('submitForm', this.form.options)\n          const options = await this.$axios\n            .$post(\n              `/api/admin/commodity/create/${this.$route.params.type}`,\n              this.form.options\n            )\n            .catch((error) => {\n              this.$message({\n                showClose: true,\n                message: `${\n                  this.optionType[this.$route.params.type]\n                }，${this.$t('content.create')}${this.$t('content.fail')}!`,\n                type: 'error',\n              })\n            })\n          if (options.success) {\n            this.$message({\n              showClose: true,\n              message: `${this.optionType[this.$route.params.type]}，${this.$t(\n                'content.create'\n              )}${this.$t('content.success')}`,\n              type: 'success',\n            })\n          } else {\n            this.$message({\n              showClose: true,\n              message: `${this.optionType[this.$route.params.type]}，${this.$t(\n                'content.create'\n              )}${this.$t('content.fail')}!`,\n              type: 'error',\n            })\n          }\n        } else {\n          // console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    resetForm(formName) {\n      // console.log('formName', formName)\n      this.$refs[formName].resetFields()\n      this.$fetch()\n    },\n\n    addOption() {\n      this.form.options.push({\n        img: '',\n        'zh-cn': '',\n        'en-us': '',\n        'ja-jp': '',\n        // 'fr-fr': '',\n        'es-es': '',\n      })\n    },\n    async createOption(item, index) {\n      console.log('createOptions', item)\n      let isValidate = true\n      this.$refs['form'].validateField(\n        [\n          'options.' + index + '.zh-cn',\n          'options.' + index + '.en-us',\n          'options.' + index + '.ja-jp',\n          // 'options.' + index + '.fr-fr',\n          'options.' + index + '.es-es',\n        ],\n        (valid) => {\n          if (valid) {\n            isValidate = false\n          }\n        }\n      )\n      // console.log('isValidate', isValidate)\n      if (isValidate) {\n        const options = await this.$axios\n          .$post(`/api/admin/commodity/create/${this.$route.params.type}`, [\n            item,\n          ])\n          .catch((error) => {\n            this.$message({\n              showClose: true,\n              message: `${this.typeText}${this.$t('content.fail')}! ${\n                error.response.data.message\n              }`,\n              type: 'error',\n            })\n          })\n        if (options.success) {\n          this.form.options.splice(index, 1, options.data[0])\n\n          this.message(\n            'success',\n            `${this.$t('content.create')}${this.$t('content.success')}!`\n          )\n        } else {\n          this.message(\n            'error',\n            `${this.$t('content.create')}${this.$t('content.fail')}!${\n              options.message\n            }`\n          )\n        }\n      }\n    },\n    async updateOption(item) {\n      console.log('updateOption', item)\n      if (!item.id) {\n        this.form.options.splice(index, 1)\n        return\n      }\n      const options = await this.$axios\n        .$post(`/api/admin/commodity/update/${this.$route.params.type}`, item)\n        .catch((error) => {\n          this.message('error', `${error.response.data.message}`)\n        })\n      if (options.success) {\n        this.message(\n          'success',\n          `${this.$t('content.update')}${this.$t('content.success')}!`\n        )\n      } else {\n        this.message(\n          'error',\n          `${this.$t('content.update')}${this.$t('content.fail')}!`\n        )\n      }\n    },\n    async removeOption(item, index) {\n      // console.log('removeOption', item)\n      if (!item.id) {\n        this.form.options.splice(index, 1)\n        return\n      }\n      const options = await this.$axios\n        .$post(`/api/admin/commodity/delete/${this.$route.params.type}`, item)\n        .catch((error) => {\n          this.message('error', `${error.response.data.message}`)\n        })\n      if (options.success) {\n        this.form.options.splice(index, 1)\n        this.message(\n          'success',\n          `${this.$t('content.delete')}${this.$t('content.success')}!`\n        )\n      } else {\n        this.message(\n          'error',\n          `${this.$t('content.delete')}${this.$t('content.fail')}!`\n        )\n      }\n    },\n    message(type, msg) {\n      this.$message({\n        showClose: true,\n        message: `${msg}`,\n        type,\n      })\n    },\n    onMock(item, index) {\n      const zncn = [\n        '零',\n        '一',\n        '二',\n        '三',\n        '四',\n        '五',\n        '六',\n        '七',\n        '八',\n        '九',\n        '十',\n      ]\n      const enus = [\n        'zero',\n        'one',\n        'two',\n        'three',\n        'four',\n        'five',\n        'six',\n        'seven',\n        'eight',\n        'nine',\n        'ten',\n      ]\n      const jajp = [\n        'ゼロ',\n        'いち',\n        'に',\n        'さん',\n        'し',\n        'ご',\n        'ろく',\n        'しち',\n        'はち',\n        'きゅう',\n        'じゅう',\n      ]\n      // const frfr = [\"zéro\", \"un\", \"deux\", \"trois\", \"quatre\", \"cinq\", \"six\", \"sept\", \"huit\", \"neuf\", \"dix\"];\n      const eses = [\n        'zéro',\n        'un',\n        'deux',\n        'trois',\n        'quatre',\n        'cinq',\n        'six',\n        'sept',\n        'huit',\n        'neuf',\n        'dix',\n      ]\n      const mock = {\n        img: '',\n        'zh-cn': `${zncn[Mock.mock('@integer(0, 9)')]} ${\n          zncn[Mock.mock('@integer(0, 9)')]\n        } ${zncn[Mock.mock('@integer(0, 9)')]}`,\n        'en-us': `${enus[Mock.mock('@integer(0, 9)')]} ${\n          enus[Mock.mock('@integer(0, 9)')]\n        } ${enus[Mock.mock('@integer(0, 9)')]}`,\n        'ja-jp': `${jajp[Mock.mock('@integer(0, 9)')]} ${\n          jajp[Mock.mock('@integer(0, 9)')]\n        } ${jajp[Mock.mock('@integer(0, 9)')]}`,\n        // \"fr-fr\": `${frfr[Mock.mock('@integer(0, 9)')]} ${frfr[Mock.mock('@integer(0, 9)')]} ${frfr[Mock.mock('@integer(0, 9)')]}`\n        'es-es': `${eses[Mock.mock('@integer(0, 9)')]} ${\n          eses[Mock.mock('@integer(0, 9)')]\n        } ${eses[Mock.mock('@integer(0, 9)')]}`,\n      }\n      this.form.options.splice(index, 1, mock)\n    },\n    handleAvatarSuccess(res, file, fileList) {\n      console.log('handleAvatarSuccess', res, file, fileList)\n      // this.userCreate.avatar = URL.createObjectURL(file.raw);\n      // this.form.options.avatar = res.data.src\n      this.form.options[res.data.index].img = res.data.src\n      console.log(this.form)\n    },\n    beforeAvatarUpload(file, index) {\n      console.log('beforeAvatarUpload', file, index)\n      // const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 2\n\n      // if (!isJPG) {\n      //   this.$message.error('上传头像图片只能是 JPG 格式!');\n      // }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!')\n      }\n      // return isJPG && isLt2M;\n      // return isLt2M\n    },\n  },\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_type.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_type.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_type.vue?vue&type=template&id=020d0aea&scoped=true&\"\nimport script from \"./_type.vue?vue&type=script&lang=js&\"\nexport * from \"./_type.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"020d0aea\",\n  \"14864f3e\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAZA;AAlBA;AAyCA;AACA;AAAA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AAGA;AALA;AAOA;AACA;AAAA;AACA;AACA;AACA;AAGA;AALA;AAOA;AACA;AACA;AACA;AAGA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AACA;AACA;AAMA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AAKA;AACA;AACA;AAGA;AALA;AAOA;AACA;AAAA;AACA;AAEA;AAIA;AACA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AAAA;AACA;AAIA;AACA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AAAA;AACA;AACA;AAIA;AACA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AACA;AAaA;AAaA;AACA;AAaA;AAaA;AACA;AACA;AAGA;AAGA;AAGA;AACA;AAZA;AAgBA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AA9PA;AAnEA;;AC5LA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}