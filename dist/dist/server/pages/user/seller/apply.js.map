{"version":3,"file":"pages/user/seller/apply.js","sources":["webpack:///./pages/user/seller/apply.vue?ebcf","webpack:///./pages/user/seller/apply.vue?a51b","webpack:///./pages/user/seller/apply.vue?2cc0","webpack:///./pages/user/seller/apply.vue?a7cf","webpack:///./pages/user/seller/apply.vue","webpack:///./pages/user/seller/apply.vue?c92b","webpack:///./pages/user/seller/apply.vue?805a"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./apply.vue?vue&type=style&index=0&id=12b91602&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"7becd704\", content, true, context)\n};","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./apply.vue?vue&type=style&index=0&id=12b91602&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".user-create[data-v-12b91602]{width:100%;display:flex;align-items:center;justify-content:center}.user-create-form[data-v-12b91602]{width:90%}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-create\"},[_c('el-form',{ref:\"userCreate\",staticClass:\"user-create-form\",attrs:{\"model\":_vm.userCreate,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',[(_vm.isCreate)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){return _vm.submitForm('userCreate')}}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('content.apply'))+\"\\n      \")]):_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\"},on:{\"click\":function($event){return _vm.submitForm('userCreate')}}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('content.update'))+\"\\n      \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"icon\":\"el-icon-check\"},on:{\"click\":_vm.onMock}},[_vm._v(\" \"+_vm._s(_vm.$t('content.fill'))+\" \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"icon\":\"el-icon-circle-close\"},on:{\"click\":function($event){return _vm.resetForm('userCreate')}}},[_vm._v(_vm._s(_vm.$t('content.clear')))])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.firstName'),\"prop\":\"firstname\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.firstName') })},model:{value:(_vm.userCreate.firstname),callback:function ($$v) {_vm.$set(_vm.userCreate, \"firstname\", $$v)},expression:\"userCreate.firstname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.lastName'),\"prop\":\"lastname\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.lastName') })},model:{value:(_vm.userCreate.lastname),callback:function ($$v) {_vm.$set(_vm.userCreate, \"lastname\", $$v)},expression:\"userCreate.lastname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.email'),\"prop\":\"email\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.email') })},model:{value:(_vm.userCreate.email),callback:function ($$v) {_vm.$set(_vm.userCreate, \"email\", $$v)},expression:\"userCreate.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.phone'),\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.phone') })},model:{value:(_vm.userCreate.phone),callback:function ($$v) {_vm.$set(_vm.userCreate, \"phone\", $$v)},expression:\"userCreate.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.password'),\"prop\":\"password\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.password') })},model:{value:(_vm.userCreate.password),callback:function ($$v) {_vm.$set(_vm.userCreate, \"password\", $$v)},expression:\"userCreate.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.gender'),\"prop\":\"gender\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.gender') })},model:{value:(_vm.userCreate.gender),callback:function ($$v) {_vm.$set(_vm.userCreate, \"gender\", $$v)},expression:\"userCreate.gender\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.country'),\"prop\":\"country\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.country') })},model:{value:(_vm.userCreate.country),callback:function ($$v) {_vm.$set(_vm.userCreate, \"country\", $$v)},expression:\"userCreate.country\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('user.language'),\"prop\":\"language\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.language') })},model:{value:(_vm.userCreate.language),callback:function ($$v) {_vm.$set(_vm.userCreate, \"language\", $$v)},expression:\"userCreate.language\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"profile\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('form.placeholder', { msg: _vm.$t('user.profile') })},model:{value:(_vm.userCreate.profile),callback:function ($$v) {_vm.$set(_vm.userCreate, \"profile\", $$v)},expression:\"userCreate.profile\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"isFullTime\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.isFullTime')},model:{value:(_vm.userCreate.isFullTime),callback:function ($$v) {_vm.$set(_vm.userCreate, \"isFullTime\", $$v)},expression:\"userCreate.isFullTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"onlineSell\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.onlineSell')},model:{value:(_vm.userCreate.onlineSell),callback:function ($$v) {_vm.$set(_vm.userCreate, \"onlineSell\", $$v)},expression:\"userCreate.onlineSell\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"sold\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.sold')},model:{value:(_vm.userCreate.sold),callback:function ($$v) {_vm.$set(_vm.userCreate, \"sold\", $$v)},expression:\"userCreate.sold\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"channel\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.channel')},model:{value:(_vm.userCreate.channel),callback:function ($$v) {_vm.$set(_vm.userCreate, \"channel\", $$v)},expression:\"userCreate.channel\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"gallery\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.gallery')},model:{value:(_vm.userCreate.gallery),callback:function ($$v) {_vm.$set(_vm.userCreate, \"gallery\", $$v)},expression:\"userCreate.gallery\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"medium\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.medium')},model:{value:(_vm.userCreate.medium),callback:function ($$v) {_vm.$set(_vm.userCreate, \"medium\", $$v)},expression:\"userCreate.medium\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"galleryInfo\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.galleryInfo')},model:{value:(_vm.userCreate.galleryInfo),callback:function ($$v) {_vm.$set(_vm.userCreate, \"galleryInfo\", $$v)},expression:\"userCreate.galleryInfo\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"recommend\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.recommend')},model:{value:(_vm.userCreate.recommend),callback:function ($$v) {_vm.$set(_vm.userCreate, \"recommend\", $$v)},expression:\"userCreate.recommend\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"prize\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.prize')},model:{value:(_vm.userCreate.prize),callback:function ($$v) {_vm.$set(_vm.userCreate, \"prize\", $$v)},expression:\"userCreate.prize\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"website\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.website')},model:{value:(_vm.userCreate.website),callback:function ($$v) {_vm.$set(_vm.userCreate, \"website\", $$v)},expression:\"userCreate.website\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"findUs\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":_vm.$t('user.seller.findUs')},model:{value:(_vm.userCreate.findUs),callback:function ($$v) {_vm.$set(_vm.userCreate, \"findUs\", $$v)},expression:\"userCreate.findUs\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Mock from 'mockjs';\nexport default {\n  watchQuery: ['sellerId'],\n  data() {\n    // var validateEmail = (rule, value, callback) => {\n    //   if (!value && !this.userCreate.phone) {\n    //     callback(new Error('\b邮箱和电话必须输入一项'))\n    //   } else {\n    //     if (!this.userCreate.phone) {\n    //       this.$refs.userCreate.clearValidate('phone')\n    //     }\n    //     callback()\n    //   }\n    // }\n    // var validatePhone = (rule, value, callback) => {\n    //   if (!this.userCreate.email && !value) {\n    //     callback(new Error('\b邮箱和电话必须输入一项'))\n    //   } else {\n    //     if (!this.userCreate.email) {\n    //       this.$refs.userCreate.clearValidate('email')\n    //     }\n    //     callback()\n    //   }\n    // }\n    return {\n      type: 'create', // create edit\n      typeText: this.$t('content.apply'),\n      isCreate: true,\n      sellerId: '',\n      userCreate: {\n        firstname: '',\n        lastname: '',\n        email: '',\n        phone: '',\n        password: '',\n        country: '',\n        language: '',\n        findUs: '',\n        isFullTime: '',\n        onlineSell: '',\n        sold: '',\n        channel: '',\n        gallery: '',\n        medium: '',\n        galleryInfo: '',\n        recommend: '',\n        prize: '',\n        website: '',\n        profile: '',\n      },\n      rules: {\n        firstname: [{ required: true, message: this.$t('form.placeholder', { msg: this.$t('user.firstName') }), trigger: 'blur' }],\n        lastname: [{ required: true, message: this.$t('form.placeholder', { msg: this.$t('user.lastName') }), trigger: 'blur' }],\n        email: [{ required: true, message: this.$t('form.placeholder', { msg: this.$t('user.email') }), trigger: 'blur' }],\n        // phone: [{ validator: validatePhone, trigger: 'blur' }],\n        password: [{ required: true, message: this.$t('form.placeholder', { msg: this.$t('user.password') }), trigger: 'blur' }],\n      },\n    }\n  },\n  async fetch() {\n    // console.log('fetch this.$refs.userCreate', this.$refs.userCreate)\n    // this.$refs.userCreate.resetFields()\n\n    if (this.$route.query && this.$route.query.sellerId) {\n      console.log('create', this.$route.query)\n      this.sellerId = this.$route.query.sellerId\n\n      const user = await this.$axios.$get('/api/admin/user/seller', {\n        params: {\n          sellerId: this.sellerId,\n        },\n      })\n      console.log('find user', user)\n      if (user.success) {\n        this.userCreate = Object.assign(this.userCreate, {\n          ...user.data,\n          ...user.data.seller,\n          ...user.data.sellerMetadata,\n        })\n\n        this.type = 'edit'\n        this.typeText = this.$t('content.update')\n        this.isCreate = false\n        this.rules.password[0].required = false\n      }\n    }\n  },\n  methods: {\n    submitForm(userCreate) {\n      this.$refs[userCreate].validate(async (valid) => {\n        if (valid) {\n          let data\n          if (this.isCreate) {\n            // 用户申请成为艺术家 /api/user/seller/apply\n            data = await this.$axios.$post(\n              '/api/user/seller/apply',\n              this.userCreate\n            )\n\n            // 管理员创建艺术家 /api/admin/user/register\n            // data = await this.$axios.$post('/api/admin/user/register', this.userCreate)\n\n            // data = await this.$axios.$post('/api/user/seller/apply', {\n            //   identity: this.$route.params.identity,\n            //   name: this.userCreate.name,\n            //   email: this.userCreate.email,\n            //   phone: this.userCreate.phone,\n            //   password: this.userCreate.password,\n            // })\n          } else {\n            data = await this.$axios.$post(\n              '/api/admin/user/seller/update',\n              this.userCreate\n            )\n          }\n\n          if (data.success) {\n            this.$message({\n              showClose: true,\n              message: `${this.userCreate.firstname}${this.userCreate.lastname}，${this.typeText}${this.$t('content.success')}`,\n              type: 'success',\n            })\n            if (this.isCreate) {\n              this.$refs[userCreate].resetFields()\n            }\n          } else {\n            this.$message({\n              showClose: true,\n              message: `${this.typeText}${this.$t('content.fail')}!${data.message}`,\n              type: 'error',\n            })\n          }\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    resetForm(userCreate) {\n      this.$refs[userCreate].resetFields()\n    },\n    onMock() {\n      this.userCreate= {\n        firstname: Mock.mock('@cfirst'),\n        lastname: Mock.mock('@clast'),\n        email: Mock.mock('@email'),\n        phone: '',\n        password: '123',\n        country: Mock.mock('@county(true)'),\n        language: this.$i18n.locales.filter(i => i.code == this.$i18n.locale)[0].name,\n        profile: Mock.mock('@cparagraph'),\n        isFullTime: '',\n        onlineSell: '',\n        sold: '',\n        channel: '',\n        gallery: '',\n        medium: '',\n        galleryInfo: '',\n        recommend: '',\n        prize: '',\n        website: '',\n\n        findUs: '',\n      }\n    }\n  },\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./apply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./apply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./apply.vue?vue&type=template&id=12b91602&scoped=true&\"\nimport script from \"./apply.vue?vue&type=script&lang=js&\"\nexport * from \"./apply.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./apply.vue?vue&type=style&index=0&id=12b91602&scoped=true&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"12b91602\",\n  \"a2b46186\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACVA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;AAqBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;AA1BA;AAkCA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AADA;AADA;AAKA;AACA;AAAA;AACA;AAEA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AApBA;AAsBA;AACA;AA9EA;AAtFA;;ACtLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}