(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{396:function(e,t,n){"use strict";var o=n(4),r=n(163),c=n(64),l=n(16),m=n(34),f=n(164),d=n(108),h=n(81),$=n(23),v=h("splice"),y=$("splice",{ACCESSORS:!0,0:0,1:2}),x=Math.max,k=Math.min;o({target:"Array",proto:!0,forced:!v||!y},{splice:function(e,t){var n,o,h,$,v,y,j=m(this),w=l(j.length),_=r(e,w),z=arguments.length;if(0===z?n=o=0:1===z?(n=0,o=w-_):(n=z-2,o=k(x(c(t),0),w-_)),w+n-o>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(h=f(j,o),$=0;$<o;$++)(v=_+$)in j&&d(h,$,j[v]);if(h.length=o,n<o){for($=_;$<w-o;$++)y=$+n,(v=$+o)in j?j[y]=j[v]:delete j[y];for($=w;$>w-o+n;$--)delete j[$-1]}else if(n>o)for($=w-o;$>_;$--)y=$+n-1,(v=$+o-1)in j?j[y]=j[v]:delete j[y];for($=0;$<n;$++)j[$+_]=arguments[$+2];return j.length=w-o+n,h}})},406:function(e,t,n){var content=n(421);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(29).default)("4f1ad40f",content,!0,{sourceMap:!1})},420:function(e,t,n){"use strict";n(406)},421:function(e,t,n){(t=n(28)(!1)).push([e.i,".avatar-uploader .el-upload[data-v-afe2c83c]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload[data-v-afe2c83c]:hover{border-color:#409eff}.avatar-uploader-icon[data-v-afe2c83c]{font-size:28px;color:#8c939d;width:88px;height:88px;line-height:88px;text-align:center}.avatar[data-v-afe2c83c]{width:88px;height:88px;display:block}",""]),e.exports=t},444:function(e,t,n){"use strict";n.r(t);n(46),n(396);var o=n(234),r=(n(15),n(3)),c=n(401),l=n.n(c),m={name:"CommodityOption",watch:{"$route.query":"$fetch"},data:function(){return{lang:["zh-cn","en-us","ja-jp","es-es"],optionType:{shape:this.$t("commodity.shape"),theme:this.$t("commodity.theme"),category:this.$t("commodity.category"),technique:this.$t("commodity.technique")},form:{options:[{img:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""}],optionsExamples:[{img:"","zh-cn":"其他","en-us":"other","ja-jp":"その他","es-es":"Español"}]}}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/api/admin/commodity/options/".concat(e.$route.params.type));case 2:(n=t.sent).data&&n.data.length&&(e.form.options=[].concat(Object(o.a)(n.data),[{img:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""}]));case 4:case"end":return t.stop()}}),t)})))()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,t.$axios.$post("/api/admin/commodity/options/".concat(t.$route.params.type,"/create"),t.form.options).catch((function(e){t.$message({showClose:!0,message:"".concat(t.optionType[t.$route.params.type],"，").concat(t.$t("content.create")).concat(t.$t("content.fail"),"!"),type:"error"})}));case 3:e.sent.success?t.$message({showClose:!0,message:"".concat(t.optionType[t.$route.params.type],"，").concat(t.$t("content.create")).concat(t.$t("content.success")),type:"success"}):t.$message({showClose:!0,message:"".concat(t.optionType[t.$route.params.type],"，").concat(t.$t("content.create")).concat(t.$t("content.fail"),"!"),type:"error"}),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields(),this.$fetch()},addOption:function(){this.form.options.push({img:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""})},createOption:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log("createOptions",e),r=!0,n.$refs.form.validateField(["options."+t+".zh-cn","options."+t+".en-us","options."+t+".ja-jp","options."+t+".es-es"],(function(e){e&&(r=!1)})),!r){o.next=8;break}return o.next=6,n.$axios.$post("/api/admin/commodity/options/".concat(n.$route.params.type,"/create"),[e]).catch((function(e){n.$message({showClose:!0,message:"".concat(n.typeText).concat(n.$t("content.fail"),"! ").concat(e.response.data.message),type:"error"})}));case 6:(c=o.sent).success?(n.form.options.splice(t,1,c.data[0]),n.message("success","".concat(n.$t("content.create")).concat(n.$t("content.success"),"!"))):n.message("error","".concat(n.$t("content.create")).concat(n.$t("content.fail"),"!").concat(c.message));case 8:case"end":return o.stop()}}),o)})))()},updateOption:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("updateOption",e),e.id){n.next=4;break}return t.form.options.splice(index,1),n.abrupt("return");case 4:return n.next=6,t.$axios.$post("/api/admin/commodity/options/".concat(t.$route.params.type,"/update"),e).catch((function(e){t.message("error","".concat(e.response.data.message))}));case 6:n.sent.success?t.message("success","".concat(t.$t("content.update")).concat(t.$t("content.success"),"!")):t.message("error","".concat(t.$t("content.update")).concat(t.$t("content.fail"),"!"));case 8:case"end":return n.stop()}}),n)})))()},removeOption:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.id){o.next=3;break}return n.form.options.splice(t,1),o.abrupt("return");case 3:return o.next=5,n.$axios.$post("/api/admin/commodity/options/".concat(n.$route.params.type,"/delete"),e).catch((function(e){n.message("error","".concat(e.response.data.message))}));case 5:o.sent.success?(n.form.options.splice(t,1),n.message("success","".concat(n.$t("content.delete")).concat(n.$t("content.success"),"!"))):n.message("error","".concat(n.$t("content.delete")).concat(n.$t("content.fail"),"!"));case 7:case"end":return o.stop()}}),o)})))()},message:function(e,t){this.$message({showClose:!0,message:"".concat(t),type:e})},onMock:function(e,t){var n=["零","一","二","三","四","五","六","七","八","九","十"],o=["zero","one","two","three","four","five","six","seven","eight","nine","ten"],r=["ゼロ","いち","に","さん","し","ご","ろく","しち","はち","きゅう","じゅう"],c=["zéro","un","deux","trois","quatre","cinq","six","sept","huit","neuf","dix"],m={img:"","zh-cn":"".concat(n[l.a.mock("@integer(0, 9)")]," ").concat(n[l.a.mock("@integer(0, 9)")]," ").concat(n[l.a.mock("@integer(0, 9)")]),"en-us":"".concat(o[l.a.mock("@integer(0, 9)")]," ").concat(o[l.a.mock("@integer(0, 9)")]," ").concat(o[l.a.mock("@integer(0, 9)")]),"ja-jp":"".concat(r[l.a.mock("@integer(0, 9)")]," ").concat(r[l.a.mock("@integer(0, 9)")]," ").concat(r[l.a.mock("@integer(0, 9)")]),"es-es":"".concat(c[l.a.mock("@integer(0, 9)")]," ").concat(c[l.a.mock("@integer(0, 9)")]," ").concat(c[l.a.mock("@integer(0, 9)")])};this.form.options.splice(t,1,m)},handleAvatarSuccess:function(e,t,n){console.log("handleAvatarSuccess",e,t,n),this.form.options[e.data.index].img=e.data.src,console.log(this.form)},beforeAvatarUpload:function(e,t){console.log("beforeAvatarUpload",e,t);var n=e.size/1024/1024<2;return n||this.$message.error("上传头像图片大小不能超过 2MB!"),n}}},f=(n(420),n(14)),component=Object(f.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px"}},[e._l(e.form.optionsExamples,(function(t){return n("el-form-item",{key:t["zh-cn"],attrs:{label:""+e.$t("content.create")+e.optionType[e.$route.params.type]+e.$t("content.example")}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{disabled:!0},model:{value:t["zh-cn"],callback:function(n){e.$set(t,"zh-cn",n)},expression:"item['zh-cn']"}})],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{disabled:!0},model:{value:t["en-us"],callback:function(n){e.$set(t,"en-us",n)},expression:"item['en-us']"}})],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{disabled:!0},model:{value:t["ja-jp"],callback:function(n){e.$set(t,"ja-jp",n)},expression:"item['ja-jp']"}})],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{disabled:!0},model:{value:t["es-es"],callback:function(n){e.$set(t,"es-es",n)},expression:"item['es-es']"}})],1),e._v(" "),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"primary"},on:{click:e.addOption}},[e._v("\n          "+e._s(e.$t("content.add"))+"\n        ")])],1),e._v(" "),n("el-col",{attrs:{span:2,offset:2}},[n("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v(e._s(e.$t("content.clear")))])],1)],1)],1)})),e._v(" "),e._l(e.form.options,(function(t,o){return n("el-form-item",{key:t["zh-cn"]},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{prop:"options."+o+".img"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload/images",data:{type:e.optionType[e.$route.params.type],index:o},"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload},model:{value:t.img,callback:function(n){e.$set(t,"img",n)},expression:"item.img"}},[t.img?n("img",{staticClass:"avatar",attrs:{src:t.img}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"options."+o+".zh-cn",rules:{required:!0,message:""+e.$t("lang.zh")+e.optionType[e.$route.params.type]+e.$t("form.noEmpty"),trigger:"blur"}}},[n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("lang.zh")})},model:{value:t["zh-cn"],callback:function(n){e.$set(t,"zh-cn",n)},expression:"item['zh-cn']"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"options."+o+".en-us",rules:{required:!0,message:""+e.$t("lang.en")+e.optionType[e.$route.params.type]+e.$t("form.noEmpty"),trigger:"blur"}}},[n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("lang.en")})},model:{value:t["en-us"],callback:function(n){e.$set(t,"en-us",n)},expression:"item['en-us']"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"options."+o+".ja-jp",rules:{required:!0,message:""+e.$t("lang.ja")+e.optionType[e.$route.params.type]+e.$t("form.noEmpty"),trigger:"blur"}}},[n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("lang.ja")})},model:{value:t["ja-jp"],callback:function(n){e.$set(t,"ja-jp",n)},expression:"item['ja-jp']"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("el-form-item",{attrs:{prop:"options."+o+".es-es",rules:{required:!0,message:""+e.$t("lang.es")+e.optionType[e.$route.params.type]+e.$t("form.noEmpty"),trigger:"blur"}}},[n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("lang.es")})},model:{value:t["es-es"],callback:function(n){e.$set(t,"es-es",n)},expression:"item['es-es']"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:5}},[t.id?n("el-button",{on:{click:function(n){return n.preventDefault(),e.updateOption(t,o)}}},[e._v(e._s(e.$t("content.update")))]):n("el-button",{on:{click:function(n){return n.preventDefault(),e.createOption(t,o)}}},[e._v(e._s(e.$t("content.create")))]),e._v(" "),n("el-button",{on:{click:function(n){return e.onMock(t,o)}}},[e._v("\n          "+e._s(e.$t("content.fill"))+"\n        ")]),e._v(" "),n("el-button",{on:{click:function(n){return n.preventDefault(),e.removeOption(t,o)}}},[e._v(e._s(e.$t("content.delete")))])],1)],1)],1)}))],2)}),[],!1,null,"afe2c83c",null);t.default=component.exports}}]);