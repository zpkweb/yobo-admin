(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{426:function(e,t,o){var content=o(459);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(16).default)("f426deee",content,!0,{sourceMap:!1})},427:function(e,t,o){var content=o(461);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(16).default)("82661db0",content,!0,{sourceMap:!1})},458:function(e,t,o){"use strict";o(426)},459:function(e,t,o){(t=o(15)(!1)).push([e.i,".quill-editor[data-v-cbf30712]{height:120px}",""]),e.exports=t},460:function(e,t,o){"use strict";o(427)},461:function(e,t,o){(t=o(15)(!1)).push([e.i,".el-upload--picture-card[data-v-cbf30712],.el-upload-list--picture-card .el-upload-list__item[data-v-cbf30712]{width:192px;height:100px;line-height:100px;text-align:center}.photo[data-v-cbf30712]{width:192px;height:100px}.commodity-photo-dialog .el-dialog[data-v-cbf30712]{width:818px}.box-card[data-v-cbf30712]{margin:20px}.video-photo-uploader-icon[data-v-cbf30712]{font-size:28px;color:#8c939d;width:239px;height:100px;line-height:100px;text-align:center}.video-photo[data-v-cbf30712]{width:239px;height:100px;display:block}",""]),e.exports=t},492:function(e,t,o){"use strict";o.r(t);o(46),o(409),o(21);var n=o(12),r=(o(17),o(3)),c=o(414),l=o.n(c);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={components:{Video:o(480).default},data:function(){return{isCreate:!!this.$route.query.informationId,isSubmit:!1,editVideoIndex:null,form:{isTop:!1,name:{id:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""},desc:{id:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""},videos:[],removeVideos:[]},videos:[],activeCollapses:["0","1","2","3","4"],editorOptionZhcn:{placeholder:this.$t("form.placeholder",{msg:"".concat(this.$t("lang.zh")).concat(this.$t("content.desc"))}),modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}},editorOptionEnus:{placeholder:this.$t("form.placeholder",{msg:"".concat(this.$t("lang.en")).concat(this.$t("content.desc"))}),modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}},editorOptionJajp:{placeholder:this.$t("form.placeholder",{msg:"".concat(this.$t("lang.ja")).concat(this.$t("content.desc"))}),modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}},editorOptionEses:{placeholder:this.$t("form.placeholder",{msg:"".concat(this.$t("lang.es")).concat(this.$t("content.desc"))}),modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}},showVideo:!1,dialogVideoTitle:"添加视频",dialogVideoData:{isTop:!1,id:"",videoId:"",video:"",ccId:"",siteId:"",videoPhoto:"",name:{"zh-cn":"","en-us":"","ja-jp":"","es-es":""},desc:{id:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""},videos:[],removeVideos:[]}}},watch:{"$route.query":"$fetch"},watchQuery:["informationId"],fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isCreate=!0,e.reset(),!e.$route.query||!e.$route.query.informationId){t.next=8;break}return e.isCreate=!1,t.next=6,e.$axios.$get("/api/admin/information/detail",{params:{informationId:e.$route.query.informationId}});case 6:(o=t.sent).success&&(e.form.isTop=o.data.isTop,e.form.name.id=o.data.id,e.form.name["zh-cn"]=o.data["zh-cn"],e.form.name["en-us"]=o.data["en-us"],e.form.name["ja-jp"]=o.data["ja-jp"],e.form.name["es-es"]=o.data["es-es"],o.data.detail&&(e.form.desc=o.data.detail),e.form.videos=o.data.videos);case 8:case"end":return t.stop()}}),t)})))()},methods:{onSubmitCreate:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(o){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=7;break}return t.isSubmit=!0,e.next=4,t.$axios.$post("/api/admin/information",t.form).catch((function(e){t.isSubmit=!1,t.$message({showClose:!0,message:"".concat(t.$t("content.create")).concat(t.$t("content.fail"),"! ").concat(e.response.data.message),type:"error"})}));case 4:data=e.sent,t.isSubmit=!1,data.success?(t.$message({showClose:!0,message:"".concat(t.$t("content.create")).concat(t.$t("content.success")),type:"success"}),t.isCreate=!1,t.$router.push({query:{informationId:data.informationId}})):t.$message({showClose:!0,message:"".concat(t.$t("content.create")).concat(t.$t("content.fail"),"!").concat(data.message),type:"error"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onSubmitUpdate:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(o){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=7;break}return t.isSubmit=!0,e.next=4,t.$axios.$post("/api/admin/information/update",m(m({},t.form),{},{informationId:t.$route.query.informationId})).catch((function(e){t.isSubmit=!1,t.$message({showClose:!0,message:"".concat(t.$t("content.update")).concat(t.$t("content.fail"),"! ").concat(e.response.data.message),type:"error"})}));case 4:data=e.sent,t.isSubmit=!1,data.success?t.$message({showClose:!0,message:"".concat(t.$t("content.update")).concat(t.$t("content.success")),type:"success"}):t.$message({showClose:!0,message:"".concat(t.$t("content.update")).concat(t.$t("content.fail"),"!").concat(data.message),type:"error"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},reset:function(){this.form={isTop:!1,name:{id:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""},desc:{id:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""},videos:[],removeVideos:[]}},onMock:function(){var e={isTop:!1,name:{"zh-cn":l.a.mock("@ctitle(2, 8)"),"en-us":l.a.mock("@title(2)"),"ja-jp":"ゼロ,いち,に,さん,し,ご,ろく,しち,はち,きゅう,じゅう","es-es":"zéro,un,deux,trois,quatre,cinq,six,sept,huit,neuf,dix"},desc:{"zh-cn":l.a.mock("@cparagraph(1,3)"),"en-us":l.a.mock("@paragraph(1,3)"),"ja-jp":"ゼロ,いち,に,さん,し,ご,ろく,しち,はち,きゅう,じゅう","es-es":"zéro,un,deux,trois,quatre,cinq,six,sept,huit,neuf,dix"},videos:[],removeVideos:[]};this.form=e},resetForm:function(e){this.reset(),this.$refs[e].clearValidate()},handleVideoPhotoSuccess:function(e,t){this.form.videos[this.editVideoIndex].videoPhoto=e.data.src},handleDefaultVideoPhotoSuccess:function(e,t){this.defaultVideo.videoPhoto=e.data.src},onEditorChangeZhcn:function(e,t){e.editor;var html=e.html;e.text;this.form.desc["zh-cn"]=html},onEditorChangeEnus:function(e,t){e.editor;var html=e.html;e.text;this.form.desc["en-us"]=html},onEditorChangeJajp:function(e,t){e.editor;var html=e.html;e.text;this.form.desc["ja-jp"]=html},onEditorChangeEses:function(e,t){e.editor;var html=e.html;e.text;this.form.desc["es-es"]=html},beforeUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传的图片大小不能超过 2MB!"),t},commodityRemoveVideo:function(e){this.form.videos[e].id&&this.form.removeVideos.push(Object.assign({},this.form.videos[e])),this.form.videos.splice(e,1)},addVideo:function(){this.dialogVideoTitle="添加视频",this.dialogVideoData={isTop:!1,id:"",videoId:"",video:"",ccId:"",siteId:"",videoPhoto:"",name:{"zh-cn":"","en-us":"","ja-jp":"","es-es":""},desc:{id:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""},videos:[],removeVideos:[]},console.log("添加视频",this.dialogVideoData),this.showVideo=!0},editVideo:function(e,data){this.dialogVideoTitle="编辑视频",this.dialogVideoIndex=e,this.dialogVideoData={isTop:!1,id:data.id,videoId:data.videoId,video:"",ccId:data.ccId,siteId:data.siteId,videoPhoto:data.videoPhoto,name:{"zh-cn":data["zh-cn"],"en-us":data["en-us"],"ja-jp":data["ja-jp"],"es-es":data["es-es"]},desc:{id:"","zh-cn":data.desc?data.desc["zh-cn"]:"","en-us":data.desc?data.desc["en-us"]:"","ja-jp":data.desc?data.desc["ja-jp"]:"","es-es":data.desc?data.desc["es-es"]:""},videos:[],removeVideos:[]},this.showVideo=!0},createDialogVideo:function(data){this.form.videos.push(data),this.showVideo=!1},editDialogVideo:function(data){console.log("editDialogVideo",data),this.form.videos[this.dialogVideoIndex]=data,this.showVideo=!1},deleteVideo:function(e,data){this.form.removeVideos.push(Object.assign({},this.form.videos[e])),this.form.videos.splice(e,1)},dialogVideoClose:function(){this.dialogVideoData={isTop:!1,id:"",videoId:"",video:"",ccId:"",siteId:"",videoPhoto:"",name:{"zh-cn":"","en-us":"","ja-jp":"","es-es":""},desc:{id:"","zh-cn":"","en-us":"","ja-jp":"","es-es":""},videos:[],removeVideos:[]}}}},f=(o(458),o(460),o(14)),component=Object(f.a)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"information"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"108px"}},[o("el-form-item",[e.isCreate?o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",loading:e.isSubmit},on:{click:function(t){return e.onSubmitCreate("form")}}},[e._v("\n        "+e._s(e.$t("content.create"))+"\n      ")]):o("el-button",{attrs:{type:"primary",icon:"el-icon-check",loading:e.isSubmit},on:{click:function(t){return e.onSubmitUpdate("form")}}},[e._v("\n        "+e._s(e.$t("content.update"))+"\n      ")]),e._v(" "),e.isCreate?o("el-button",{attrs:{icon:"el-icon-check"},on:{click:e.onMock}},[e._v("\n        "+e._s(e.$t("content.fill"))+"\n      ")]):e._e(),e._v(" "),o("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:function(t){return e.resetForm("form")}}},[e._v(e._s(e.$t("content.clear")))])],1),e._v(" "),o("el-collapse",{model:{value:e.activeCollapses,callback:function(t){e.activeCollapses=t},expression:"activeCollapses"}},[o("el-collapse-item",{attrs:{title:"标题 ",name:"0"}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("langname",{lang:e.$t("lang.zh"),name:e.$t("content.title")}),prop:"name.zh-cn",rules:{required:!0,message:""+e.$t("lang.zh")+e.$t("content.title")+e.$t("form.noEmpty"),trigger:"blur"}}},[o("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:""+e.$t("lang.zh")+e.$t("content.title")})},model:{value:e.form.name["zh-cn"],callback:function(t){e.$set(e.form.name,"zh-cn",t)},expression:"form.name['zh-cn']"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("langname",{lang:e.$t("lang.en"),name:e.$t("content.title")}),prop:"name.en-us",rules:{required:!0,message:""+e.$t("lang.en")+e.$t("content.title")+e.$t("form.noEmpty"),trigger:"blur"}}},[o("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:""+e.$t("lang.en")+e.$t("content.title")})},model:{value:e.form.name["en-us"],callback:function(t){e.$set(e.form.name,"en-us",t)},expression:"form.name['en-us']"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("langname",{lang:e.$t("lang.ja"),name:e.$t("content.title")}),prop:"name.ja-jp",rules:{required:!0,message:""+e.$t("lang.ja")+e.$t("content.title")+e.$t("form.noEmpty"),trigger:"blur"}}},[o("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:""+e.$t("lang.ja")+e.$t("content.title")})},model:{value:e.form.name["ja-jp"],callback:function(t){e.$set(e.form.name,"ja-jp",t)},expression:"form.name['ja-jp']"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("langname",{lang:e.$t("lang.es"),name:e.$t("content.title")}),prop:"name.es-es",rules:{required:!0,message:""+e.$t("lang.es")+e.$t("content.title")+e.$t("form.noEmpty"),trigger:"blur"}}},[o("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:""+e.$t("lang.es")+e.$t("content.title")})},model:{value:e.form.name["es-es"],callback:function(t){e.$set(e.form.name,"es-es",t)},expression:"form.name['es-es']"}})],1)],1)],1)],1),e._v(" "),o("el-collapse-item",{attrs:{title:"描述 ",name:"1"}},[o("el-form-item",{attrs:{label:e.$t("langname",{lang:e.$t("lang.zh"),name:e.$t("commodity.desc")}),prop:"desc.zh-cn"}},[o("div",{directives:[{name:"quill",rawName:"v-quill:myQuillEditorZhcn",value:{placeholder:e.$t("form.placeholder",{msg:""+e.$t("lang.zh")+e.$t("content.desc")}),modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}},expression:"{\n              placeholder: $t('form.placeholder', {\n                msg: `${$t('lang.zh')}${$t('content.desc')}`,\n              }),\n              // some quill options\n              modules: {\n                toolbar: [\n                  ['bold', 'italic', 'underline', 'strike'],\n                  ['blockquote', 'code-block'],\n                ],\n              },\n            }",arg:"myQuillEditorZhcn"}],staticClass:"quill-editor",attrs:{content:e.form.desc["zh-cn"]},on:{change:function(t){return e.onEditorChangeZhcn(t,"zhcn")}}})]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("langname",{lang:e.$t("lang.en"),name:e.$t("commodity.desc")}),prop:"desc.en-us"}},[o("div",{directives:[{name:"quill",rawName:"v-quill:myQuillEditorEnus",value:e.editorOptionEnus,expression:"editorOptionEnus",arg:"myQuillEditorEnus"}],staticClass:"quill-editor",attrs:{content:e.form.desc["en-us"]},on:{change:function(t){return e.onEditorChangeEnus(t,"enus")}}})]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("langname",{lang:e.$t("lang.ja"),name:e.$t("commodity.desc")}),prop:"desc.ja-jp"}},[o("div",{directives:[{name:"quill",rawName:"v-quill:myQuillEditorJajp",value:e.editorOptionJajp,expression:"editorOptionJajp",arg:"myQuillEditorJajp"}],staticClass:"quill-editor",attrs:{content:e.form.desc["ja-jp"]},on:{change:function(t){return e.onEditorChangeJajp(t,"jajp")}}})]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("langname",{lang:e.$t("lang.es"),name:e.$t("commodity.desc")}),prop:"desc.es-es"}},[o("div",{directives:[{name:"quill",rawName:"v-quill:myQuillEditorEses",value:e.editorOptionEses,expression:"editorOptionEses",arg:"myQuillEditorEses"}],staticClass:"quill-editor",attrs:{content:e.form.desc["es-es"]},on:{change:function(t){return e.onEditorChangeEses(t,"eses")}}})])],1),e._v(" "),o("el-collapse-item",{attrs:{title:"视频 ",name:"2"}},[e._l(e.form.videos,(function(t,n){return o("el-card",{key:t.id,staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(o){return e.editVideo(n,t)}}},[e._v("编辑视频")]),e._v(" "),o("el-button",{staticStyle:{padding:"3px 0",color:"#F56C6C"},attrs:{type:"text"},on:{click:function(o){return e.deleteVideo(n,t)}}},[e._v("删除视频")])],1),e._v(" "),o("div",{staticClass:"text item"},[e._v("\n            标题: "+e._s(t["zh-cn"])+"\n          ")]),e._v(" "),o("div",{staticClass:"text item"},[e._v("\n            ccId: "+e._s(t.ccId)+"\n          ")]),e._v(" "),o("div",{staticClass:"text item"},[e._v("\n            siteId: "+e._s(t.siteId)+"\n          ")]),e._v(" "),o("div",{staticClass:"text item"},[e._v("\n            视频封面图片:\n            "),o("br"),e._v(" "),t.videoPhoto?o("img",{attrs:{src:t.videoPhoto,width:"768",height:"400"}}):e._e()])])})),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.addVideo}},[e._v("添加视频")])],1)],2)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.dialogVideoTitle,visible:e.showVideo,close:e.dialogVideoClose,width:"80%"},on:{"update:visible":function(t){e.showVideo=t}}},[e.showVideo?o("Video",{attrs:{dialogVideoData:e.dialogVideoData},on:{createDialogVideo:e.createDialogVideo,editDialogVideo:e.editDialogVideo}}):e._e()],1)],1)}),[],!1,null,"cbf30712",null);t.default=component.exports}}]);