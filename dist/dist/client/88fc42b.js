(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{396:function(e,t,r){"use strict";var l=r(4),n=r(163),o=r(64),c=r(16),m=r(34),d=r(164),f=r(108),h=r(81),v=r(23),C=h("splice"),$=v("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,x=Math.min;l({target:"Array",proto:!0,forced:!C||!$},{splice:function(e,t){var r,l,h,v,C,$,k=m(this),w=c(k.length),_=n(e,w),O=arguments.length;if(0===O?r=l=0:1===O?(r=0,l=w-_):(r=O-2,l=x(y(o(t),0),w-_)),w+r-l>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(h=d(k,l),v=0;v<l;v++)(C=_+v)in k&&f(h,v,k[C]);if(h.length=l,r<l){for(v=_;v<w-l;v++)$=v+r,(C=v+l)in k?k[$]=k[C]:delete k[$];for(v=w;v>w-l+r;v--)delete k[v-1]}else if(r>l)for(v=w-l;v>_;v--)$=v+r-1,(C=v+l-1)in k?k[$]=k[C]:delete k[$];for(v=0;v<r;v++)k[v+_]=arguments[v+2];return k.length=w-l+r,h}})},417:function(e,t,r){var content=r(449);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(29).default)("f6e3955a",content,!0,{sourceMap:!1})},448:function(e,t,r){"use strict";r(417)},449:function(e,t,r){(t=r(28)(!1)).push([e.i,".user-create[data-v-4e1c0d52]{width:100%;display:flex;align-items:center;justify-content:center}.user-create-form[data-v-4e1c0d52]{width:90%}.button-new-tag[data-v-4e1c0d52],.el-tag+.el-tag[data-v-4e1c0d52]{margin-left:10px}.button-new-tag[data-v-4e1c0d52]{height:32px;line-height:30px;padding-top:0;padding-bottom:0}.input-new-tag[data-v-4e1c0d52]{width:90px;margin-left:10px;vertical-align:bottom}.seller-banner-uploader-icon[data-v-4e1c0d52]{font-size:28px;color:#8c939d;width:239px;height:100px;line-height:100px;text-align:center}.seller-banner[data-v-4e1c0d52]{width:239px;height:100px;display:block}",""]),e.exports=t},474:function(e,t,r){"use strict";r.r(t);r(46),r(65),r(244),r(396),r(19);var l=r(12),n=(r(15),r(3)),o=r(401),c=r.n(o);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={watchQuery:["sellerId"],data:function(){return{isSubmit:!1,type:"create",inputVisible:!1,inputValue:"",typeText:this.$t("content.create"),isCreate:!0,sellerId:"",stateOptions:[{value:0,label:this.$t("content.audit")},{value:1,label:this.$t("content.agree")},{value:2,label:this.$t("content.reject")},{value:3,label:this.$t("content.disable")},{value:4,label:this.$t("content.logoff")}],typeOptions:[{value:0,label:this.$t("user.seller.typeOptions.painter")},{value:1,label:this.$t("user.seller.typeOptions.sculptor")}],userCreate:{state:1,type:0,avatar:"",banner:"",choice:!1,tags:[],firstname:"",lastname:"",email:"",phone:"",password:"",country:"",language:"",findUs:"",isFullTime:"",onlineSell:"",sold:"",channel:"",gallery:"",medium:"",galleryInfo:"",recommend:"",prize:"",website:"",profile:""},rules:{email:[{required:!0,message:this.$t("form.placeholder",{msg:this.$t("user.email")}),trigger:"blur"}],password:[{required:!0,message:this.$t("form.placeholder",{msg:this.$t("user.password")}),trigger:"blur"}]}}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$route.query||!e.$route.query.sellerId){t.next=6;break}return e.sellerId=e.$route.query.sellerId,t.next=4,e.$axios.$get("/api/admin/seller",{params:{sellerId:e.sellerId}});case 4:(r=t.sent).success&&(e.userCreate=Object.assign(e.userCreate,d(d(d({},r.data),r.data.user),r.data.metadata)),e.type="edit",e.typeText=e.$t("content.update"),e.isCreate=!1,e.rules.password[0].required=!1);case 6:case"end":return t.stop()}}),t)})))()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(l){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!l){r.next=21;break}if(t.isSubmit=!0,r.prev=2,!t.isCreate){r.next=9;break}return r.next=6,t.$axios.$post("/api/admin/user/register",d({identity:"seller",typeName:t.typeOptions[t.userCreate.type].label},t.userCreate)).catch((function(e){t.isSubmit=!1}));case 6:data=r.sent,r.next=12;break;case 9:return r.next=11,t.$axios.$post("/api/admin/seller/update",d({typeName:t.typeOptions[t.userCreate.type].label},t.userCreate)).catch((function(e){t.isSubmit=!1}));case 11:data=r.sent;case 12:t.isSubmit=!1,data.success?(t.$message({showClose:!0,message:"".concat(t.userCreate.firstname).concat(t.userCreate.lastname,"，").concat(t.typeText).concat(t.$t("content.success")),type:"success"}),t.isCreate&&t.$refs[e].resetFields()):t.$message({showClose:!0,message:"".concat(t.typeText).concat(t.$t("content.fail")),type:"error"}),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(2),t.$message({showClose:!0,message:"".concat(t.typeText).concat(t.$t("content.fail")),type:"error"});case 19:r.next=22;break;case 21:return r.abrupt("return",!1);case 22:case"end":return r.stop()}}),r,null,[[2,16]])})));return function(e){return r.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},onMock:function(){var e=this;this.userCreate={avatar:"",state:1,type:0,tags:[],firstname:c.a.mock("@cfirst"),lastname:c.a.mock("@clast"),email:c.a.mock("@email"),phone:"",password:"123",country:c.a.mock("@province"),language:this.$i18n.locales.filter((function(i){return i.code==e.$i18n.locale}))[0].name,profile:c.a.mock("@cparagraph"),isFullTime:"",onlineSell:"",sold:"",channel:"",gallery:"",medium:"",galleryInfo:"",recommend:"",prize:"",website:"",findUs:""}},handleSuccess:function(e,t){this.userCreate.avatar=e.data.src},handleSellerBannerSuccess:function(e,t){this.userCreate.banner=e.data.src},beforeUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传的图片大小不能超过 2MB!"),t},handleClose:function(e){this.userCreate.tags.splice(this.userCreate.tags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.userCreate.tags.push(e),this.inputVisible=!1,this.inputValue=""}}},h=(r(448),r(14)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-create"},[r("el-form",{ref:"userCreate",staticClass:"user-create-form",attrs:{model:e.userCreate,rules:e.rules,"label-width":"90px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",[e.isCreate?r("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",loading:e.isSubmit},on:{click:function(t){return e.submitForm("userCreate")}}},[e._v("\n          "+e._s(e.$t("content.create"))+"\n        ")]):r("el-button",{attrs:{type:"primary",icon:"el-icon-check",loading:e.isSubmit},on:{click:function(t){return e.submitForm("userCreate")}}},[e._v("\n          "+e._s(e.$t("content.update"))+"\n        ")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-check"},on:{click:e.onMock}},[e._v("\n          "+e._s(e.$t("content.fill"))+"\n        ")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:function(t){return e.resetForm("userCreate")}}},[e._v(e._s(e.$t("content.clear")))])],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$t("user.state"),prop:"identity"}},[r("el-radio-group",{model:{value:e.userCreate.state,callback:function(t){e.$set(e.userCreate,"state",t)},expression:"userCreate.state"}},e._l(e.stateOptions,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$t("user.type"),prop:"identity"}},[r("el-radio-group",{model:{value:e.userCreate.type,callback:function(t){e.$set(e.userCreate,"type",t)},expression:"userCreate.type"}},e._l(e.typeOptions,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:e.$t("user.seller.choice"),prop:"choice"}},[r("el-switch",{model:{value:e.userCreate.choice,callback:function(t){e.$set(e.userCreate,"choice",t)},expression:"userCreate.choice"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.seller.banner"),prop:"avatar"}},[r("el-upload",{staticClass:"banner-uploader",attrs:{action:e.$config.origin+"/api/upload/images",data:{type:"sellerBanner"},"show-file-list":!1,"on-success":e.handleSellerBannerSuccess,"before-upload":e.beforeUpload},model:{value:e.userCreate.banner,callback:function(t){e.$set(e.userCreate,"banner",t)},expression:"userCreate.banner"}},[e.userCreate.banner?r("img",{staticClass:"seller-banner",attrs:{src:e.userCreate.banner}}):r("i",{staticClass:"el-icon-plus seller-banner-uploader-icon"}),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n          艺术家背景图片，请上传 (大于1220)X510 比例的图片，且不超过2M\n        ")])])],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.avatar"),prop:"avatar"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$config.origin+"/api/upload/images",data:{type:"avatar"},"show-file-list":!1,"on-success":e.handleSuccess,"before-upload":e.beforeUpload},model:{value:e.userCreate.avatar,callback:function(t){e.$set(e.userCreate,"avatar",t)},expression:"userCreate.avatar"}},[e.userCreate.avatar?r("img",{staticClass:"avatar",attrs:{src:e.userCreate.avatar}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n          艺术家头像，请上传 正方形 的图片，且不超过2M\n        ")])])],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.label"),prop:"tags"}},[e._l(e.userCreate.tags,(function(t){return r("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(r){return e.handleClose(t)}}},[e._v("\n        "+e._s(t)+"\n      ")])})),e._v(" "),e.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Tag")])],2),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.firstName"),prop:"firstname"}},[r("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.firstName")})},model:{value:e.userCreate.firstname,callback:function(t){e.$set(e.userCreate,"firstname",t)},expression:"userCreate.firstname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.lastName"),prop:"lastname"}},[r("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.lastName")})},model:{value:e.userCreate.lastname,callback:function(t){e.$set(e.userCreate,"lastname",t)},expression:"userCreate.lastname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.email"),prop:"email"}},[r("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.email")})},model:{value:e.userCreate.email,callback:function(t){e.$set(e.userCreate,"email",t)},expression:"userCreate.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.phone"),prop:"phone"}},[r("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.phone")})},model:{value:e.userCreate.phone,callback:function(t){e.$set(e.userCreate,"phone",t)},expression:"userCreate.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.password"),prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.password")})},model:{value:e.userCreate.password,callback:function(t){e.$set(e.userCreate,"password",t)},expression:"userCreate.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.gender"),prop:"gender"}},[r("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.gender")})},model:{value:e.userCreate.gender,callback:function(t){e.$set(e.userCreate,"gender",t)},expression:"userCreate.gender"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.country"),prop:"country"}},[r("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.country")})},model:{value:e.userCreate.country,callback:function(t){e.$set(e.userCreate,"country",t)},expression:"userCreate.country"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("user.language"),prop:"language"}},[r("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.language")})},model:{value:e.userCreate.language,callback:function(t){e.$set(e.userCreate,"language",t)},expression:"userCreate.language"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"profile"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("form.placeholder",{msg:e.$t("user.profile")})},model:{value:e.userCreate.profile,callback:function(t){e.$set(e.userCreate,"profile",t)},expression:"userCreate.profile"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"isFullTime"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.isFullTime")},model:{value:e.userCreate.isFullTime,callback:function(t){e.$set(e.userCreate,"isFullTime",t)},expression:"userCreate.isFullTime"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"onlineSell"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.onlineSell")},model:{value:e.userCreate.onlineSell,callback:function(t){e.$set(e.userCreate,"onlineSell",t)},expression:"userCreate.onlineSell"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"sold"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.sold")},model:{value:e.userCreate.sold,callback:function(t){e.$set(e.userCreate,"sold",t)},expression:"userCreate.sold"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"channel"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.channel")},model:{value:e.userCreate.channel,callback:function(t){e.$set(e.userCreate,"channel",t)},expression:"userCreate.channel"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"gallery"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.gallery")},model:{value:e.userCreate.gallery,callback:function(t){e.$set(e.userCreate,"gallery",t)},expression:"userCreate.gallery"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"medium"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.medium")},model:{value:e.userCreate.medium,callback:function(t){e.$set(e.userCreate,"medium",t)},expression:"userCreate.medium"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"galleryInfo"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.galleryInfo")},model:{value:e.userCreate.galleryInfo,callback:function(t){e.$set(e.userCreate,"galleryInfo",t)},expression:"userCreate.galleryInfo"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"recommend"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.recommend")},model:{value:e.userCreate.recommend,callback:function(t){e.$set(e.userCreate,"recommend",t)},expression:"userCreate.recommend"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"prize"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.prize")},model:{value:e.userCreate.prize,callback:function(t){e.$set(e.userCreate,"prize",t)},expression:"userCreate.prize"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"website"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.website")},model:{value:e.userCreate.website,callback:function(t){e.$set(e.userCreate,"website",t)},expression:"userCreate.website"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"findUs"}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$t("user.seller.findUs")},model:{value:e.userCreate.findUs,callback:function(t){e.$set(e.userCreate,"findUs",t)},expression:"userCreate.findUs"}})],1)],1)],1)}),[],!1,null,"4e1c0d52",null);t.default=component.exports}}]);