(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{396:function(e,t,n){"use strict";var r=n(4),o=n(163),c=n(64),l=n(16),m=n(34),d=n(164),h=n(108),f=n(81),$=n(23),v=f("splice"),y=$("splice",{ACCESSORS:!0,0:0,1:2}),w=Math.max,x=Math.min;r({target:"Array",proto:!0,forced:!v||!y},{splice:function(e,t){var n,r,f,$,v,y,_=m(this),S=l(_.length),k=o(e,S),E=arguments.length;if(0===E?n=r=0:1===E?(n=0,r=S-k):(n=E-2,r=x(w(c(t),0),S-k)),S+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(f=d(_,r),$=0;$<r;$++)(v=k+$)in _&&h(f,$,_[v]);if(f.length=r,n<r){for($=k;$<S-r;$++)y=$+n,(v=$+r)in _?_[y]=_[v]:delete _[y];for($=S;$>S-r+n;$--)delete _[$-1]}else if(n>r)for($=S-r;$>k;$--)y=$+n-1,(v=$+r-1)in _?_[y]=_[v]:delete _[y];for($=0;$<n;$++)_[$+k]=arguments[$+2];return _.length=S-r+n,f}})},410:function(e,t,n){var content=n(430);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(29).default)("6fd0d6a0",content,!0,{sourceMap:!1})},429:function(e,t,n){"use strict";n(410)},430:function(e,t,n){(t=n(28)(!1)).push([e.i,".table-column-span[data-v-9f6c1962]{display:inline-block;height:40px;line-height:40px}",""]),e.exports=t},450:function(e,t,n){"use strict";n.r(t);n(46),n(30),n(396),n(19),n(15);var r=n(3),o={data:function(){return{currentPage:1,pageSize:8,total:0,user:[],userSearch:{name:"",email:"",phone:"",identity:""},identitys:[],identityOptions:[{name:"all",ename:"",index:0},{name:"menu.user.admin.title",ename:"admin",index:2},{name:"menu.user.customerService.title",ename:"customerService",index:3},{name:"menu.user.seller.title",ename:"seller",index:5},{name:"menu.user.ordinary.title",ename:"ordinary",index:80}]}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/api/admin/identityList");case 2:return(n=t.sent).success&&(e.identitys=n.data),t.next=6,e.$axios.$get("/api/admin/user/search",{params:{identity:e.userSearch.identity,name:e.userSearch.name,email:e.userSearch.email,phone:e.userSearch.phone,pageSize:e.pageSize,currentPage:e.currentPage}});case 6:r=t.sent,console.log("userSearch",r),e.total=r.data.total,o=r.data.list.map((function(e){return e.isEdit=!1,e.visible=!1,e.identitys=e.identitys.map((function(e){return e.identityVisible=!1,e})),e})),e.user=o;case 11:case"end":return t.stop()}}),t)})))()},methods:{onSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/api/admin/user/search",{params:{identity:e.userSearch.identity,name:e.userSearch.name,email:e.userSearch.email,phone:e.userSearch.phone,pageSize:e.pageSize,currentPage:e.currentPage}});case 2:n=t.sent,e.total=n.data.total,r=n.data.list.map((function(e){return e.isEdit=!1,e})),e.user=r;case 6:case"end":return t.stop()}}),t)})))()},removeUser:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("removeUser",t),r.next=3,n.$axios.$get("/api/admin/user/remove",{params:{userId:t.userId}});case 3:r.sent.success?(n.user.splice(e,1),n.$message({showClose:!0,message:"".concat(n.$t("content.delete")).concat(n.$t("content.success")),type:"success"})):n.$message({showClose:!0,message:"".concat(n.$t("content.delete")).concat(n.$t("content.fail"),"!"),type:"error"});case 5:case"end":return r.stop()}}),r)})))()},deleteUserIdentity:function(e,t,n,o){var c=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("deleteUserIdentity",e,t,n,o),r.next=3,c.$axios.$get("/api/admin/user/identity/delete",{params:{identity:o.ename,userId:t.userId}});case 3:r.sent.success?(c.user[e].identitys.splice(n,1),c.$message({showClose:!0,message:"".concat(c.$t("content.delete")).concat(c.$t("content.success")),type:"success"})):c.$message({showClose:!0,message:"".concat(c.$t("content.delete")).concat(c.$t("content.fail"),"!"),type:"error"});case 5:case"end":return r.stop()}}),r)})))()},editUser:function(e,t){console.log(e,t),this.user[e].isEdit=!0},cancelEditUser:function(e,t){this.user[e].isEdit=!1},updateUser:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("updateUser",e,t),r.next=3,n.$axios.$post("/api/admin/user/update",{userId:t.userId,name:t.name,email:t.email,phone:t.phone});case 3:data=r.sent,console.log("data",data),data.success?(n.$message({showClose:!0,message:"".concat(t.name,"ï¼Œ").concat(n.$t("content.update")).concat(n.$t("content.success")),type:"success"}),n.user[e].isEdit=!1):n.$message({showClose:!0,message:"".concat(n.$t("content.update")).concat(n.$t("content.fail"),"!").concat(data.message),type:"error"});case 6:case"end":return r.stop()}}),r)})))()},formatterDate:function(e,t,n,r){return this.$moment(n).format("YYYY-MM-DD HH:mm:ss")},changeCurrentPage:function(e){this.currentPage=e,this.onSubmit()}}},c=(n(429),n(14)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.userSearch}},[n("el-form-item",{attrs:{label:e.$t("user.name")}},[n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.name")}),clearable:""},model:{value:e.userSearch.name,callback:function(t){e.$set(e.userSearch,"name",t)},expression:"userSearch.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("user.email")}},[n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.email")}),clearable:""},model:{value:e.userSearch.email,callback:function(t){e.$set(e.userSearch,"email",t)},expression:"userSearch.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("user.phone")}},[n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.phone")}),clearable:""},model:{value:e.userSearch.phone,callback:function(t){e.$set(e.userSearch,"phone",t)},expression:"userSearch.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("user.identity")}},[n("el-select",{attrs:{placeholder:e.$t("form.selectPlaceholder",{msg:e.$t("user.identity")})},model:{value:e.userSearch.identity,callback:function(t){e.$set(e.userSearch,"identity",t)},expression:"userSearch.identity"}},e._l(e.identityOptions,(function(t){return n("el-option",{key:t.ename,attrs:{label:e.$t(t.name),value:t.ename}})})),1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("content.search")))])],1)],1),e._v(" "),n("el-table",{attrs:{data:e.user,border:""}},[n("el-table-column",{attrs:{prop:"name",label:e.$t("user.name")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.name")}),clearable:""},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}}):n("span",[e._v("\n          "+e._s(t.row.name)+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"email",label:e.$t("user.email")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.email")}),clearable:""},model:{value:t.row.email,callback:function(n){e.$set(t.row,"email",n)},expression:"scope.row.email"}}):n("span",{staticClass:"table-column-span"},[e._v("\n          "+e._s(t.row.email)+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"phone",label:e.$t("user.phone")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?n("el-input",{attrs:{placeholder:e.$t("form.placeholder",{msg:e.$t("user.phone")}),clearable:""},model:{value:t.row.phone,callback:function(n){e.$set(t.row,"phone",n)},expression:"scope.row.phone"}}):n("span",{staticClass:"table-column-span"},[e._v("\n          "+e._s(t.row.phone)+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"createdDate",label:e.$t("content.createdDate"),formatter:e.formatterDate}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("content.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?n("div",[n("el-button",{attrs:{size:"mini",icon:"el-icon-close"},on:{click:function(n){return e.cancelEditUser(t.$index,t.row)}}},[e._v(e._s(e.$t("content.cancel")))]),e._v(" "),n("span",[n("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-check"},on:{click:function(n){return e.updateUser(t.$index,t.row)}}},[e._v(e._s(e.$t("content.update")))])],1)],1):n("div",[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(n){return e.editUser(t.$index,t.row)}}},[e._v(e._s(e.$t("content.edit")))]),e._v(" "),n("el-popover",{attrs:{placement:"top"},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}},[n("p",[e._v(e._s(e.$t("content.deleteText")))]),e._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.visible=!1}}},[e._v(e._s(e.$t("content.cancel")))]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.removeUser(t.$index,t.row)}}},[e._v(e._s(e.$t("content.define")))])],1),e._v(" "),n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[e._v(e._s(e.$t("content.delete")))])],1)],1)]}}])})],1),e._v(" "),n("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.currentPage,total:e.total},on:{"current-change":e.changeCurrentPage}})],1)}),[],!1,null,"9f6c1962",null);t.default=component.exports}}]);